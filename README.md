# RestaurantProjectHSE
# Руководство по использованию программы

## Аутентификация

Программа предоставляет систему аутентификации для двух типов пользователей: администраторов и посетителей.

- **Посетители**: Любой пользователь может создать аккаунт посетителя.
- **Администраторы**: Для создания аккаунта администратора требуется быть уже аутентифицированным как администратор или использовать специальный код безопасности.

### Код безопасности

Для создания аккаунта администратора необходимо быть уже аутентифицированным как администратор или использовать предустановленный код безопасности: `SuperUser1337`. В меню опция входа с помощью кода безопасности обозначена `Authorize with code`  
При входе с использованием кода безопасности пользователю доступны все те действия, которые доступны всем администраторам.

## Процесс использования программы

1. **Регистрация или вход в систему**:
   - Пользователь должен зарегистрироваться (`Register visitor`) или войти в уже существующий аккаунт (`Login visitor` или `Login admin`).

2. **Обработка запросов**: в зависимости от типа аккаунта, под которым вошёл пользователя, ему будут доступны разные опции в меню, соответствующие его уровню доступа.
   

### Действия для посетителей:

- **Перейти в меню заказов `Open order menu`**: 
  - Позволяет просматривать (`Show orders`), создавать (`Create order`), отменять (`Cancel`), изменять (`Add dish to order`) и оплачивать (`Pay for order`) заказы.
- **Меню отзывов**:
  - Позволяет просматривать (`Show reviews`), оствлять (`Leave review`), удалять (`Delete review`) и изменять (`Update review`) отзывы.

### Действия для администраторов:

- **Добавление нового администратора**: 
  - Предоставляет возможность создать новый аккаунт администратора (`Add new admin account`).
- **Меню модификации меню**:
  - Позволяет просматривать (`Get all menu entries`), добавлять (`Add dish to menu`), удалять (`Remove dish from menu`) заказы.
  - Позволяет изменять параметры заказов: `Set dish count`, `Set dish price`, `Set dish cooking time`
- **Меню статистики**:
  - Предоставляет доступ к различным статистическим данным, таким как средний рейтинг блюд (`Average rating of dishes`), количество заказов за определенный временной интервал (`Number of orders over period`), общий доход (`Revenue`).
  - Позволяет получить самые популярные блюда (`Popular dishes`)
  - Позволяет просмотреть отзывы пользователей о блюдах (`Show dish reviews`)

## Ограничения на входные данные
Программа накладывает ряд ограничений на входные данные. Так, например, программа проверяет на корректность диапазоны значений в тех местах, где это необходимо (например оценка блюда может быть от 1 до 5). Также программа проверяет входные данные на соответсвие нужному типу.

### Структура программы.
Программа разделена на несколько слоев: presentation, domain, data.
Бизнес логика приложения построена на основе контроллеров и сервисов.  
Программа написана с применением принципов ООП и SOLID.  
Части программы зависят только от реализаций, а не от интерфейсов.  
Все зависимости построены таким образом, чтобы была возможность заменять используемые сервисы, контроллеры и стратегии исолненения с учётом требований.  
Программа расширяема и масштабируема.

## Основные сервисы.
- Сервис оплаты заказов
- Сервис верефикации паролей
- Сервис обработки заказов
- Сервис приоритета заказов

## Шаблоны проектирования

В проекте использованы следующие шаблоны проектирования:

1. **Singleton**: Для реализации внедрения зависимостей (DI).
2. **Strategy**: Для предоставления различных способов вывода данных в меню, получения запросов, приготовления заказа.
3. **Factory**: Для создания экземпляров различных меню.

## Многопоточная обработка заказов
Обработка заказов осуществляется в нескольких потоках с использованием kotlin thread. Многопоточная обработка осуществляется за счёт наличия пула потоков, в которых обрабатываются заказы, при этом заказы можно отменять до того, как они были приготовлены.

## Система приоритетов

В приложении используется следующая система приоритетов для обработки заказов: **заказы помещаются в очередь в порядке их создания** (заказы, созданные ранее, обрабатываются раньше). Одновременно обрабатываются только 5 заказов, остальные помещаются в очередь в ожидании завершения обработки одного из них. Такая система обработки заказов выглядит наиболее оптимально для ресторана, так как при таком подходе к приоритезации заказов не может возникнуть ситуации, когда один человек будет бесконечно ждать, когда будет выполнен его заказ из-за низкого приоритета

## Набор данных
Программа содержит небольшой набор заранее подготовленных данных. Заранее были созданы два аккаунта:
- Name: Visitor; Password: 1234; Access: Visitor
- Name: Administrator; Password: 12345678; Access: Admin  
Также программа содержит информацию о нескольких заказах и отзывах на заказы.

[<img src="https://celes.club/uploads/posts/2021-12/1640063429_28-celes-club-p-rakun-zhivotnoe-zhivotnie-krasivo-foto-31.jpg" width="1000"/>](https://www.youtube.com/watch?v=BL8ZKeGCaIg)
